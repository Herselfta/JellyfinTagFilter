# Jellyfin 标签筛选器 - 快速测试指南

## 🚀 1 分钟快速测试

### 步骤 1: 部署到 Jellyfin 服务器（推荐）

在 PowerShell 中运行：

```powershell
cd "C:\Users\Administrator\Documents\Personal_Materials\Scripts\JellyfinTagFilter"
.\一键部署PWA.ps1
```

或者手动复制：

```powershell
Copy-Item "jellyfin_tag_filter.html" "D:\JellyfinServer\wwwroot\tag_filter.html"
```

### 步骤 2: 浏览器访问

**电脑端测试：**
- 打开浏览器，访问：`http://localhost:8096/tag_filter.html`

**手机端测试：**
1. 确保手机和电脑在同一 WiFi 网络
2. 获取电脑 IP 地址（在电脑上运行 `ipconfig` 查看）
3. 在手机浏览器输入：`http://你的电脑IP:8096/tag_filter.html`

### 步骤 3: 配置并加载

1. **填写配置信息：**
   - Jellyfin 服务器地址：`http://localhost:8096`（手机端用 `http://电脑IP:8096`）
   - API 密钥：去 Jellyfin 后台获取
   - 媒体库 ID：去 Jellyfin 媒体库 URL 获取

2. **点击"加载媒体库"**

3. **选择标签测试 AND 逻辑**
   - 点击多个标签
   - 观察结果只显示同时包含所有选中标签的媒体

## 📱 手机端测试检查清单

### iOS 测试

- [ ] Safari 浏览器访问正常
- [ ] 页面自动适配屏幕
- [ ] 标签点击响应灵敏
- [ ] 网格视图显示正常
- [ ] 列表视图显示正常
- [ ] 点击媒体项可以跳转
- [ ] 添加到主屏幕功能正常

### Android 测试

- [ ] Chrome 浏览器访问正常
- [ ] 页面自动适配屏幕
- [ ] 标签点击响应灵敏
- [ ] 网格视图显示正常
- [ ] 列表视图显示正常
- [ ] 点击媒体项可以跳转
- [ ] 添加到主屏幕功能正常

### 屏幕尺寸测试

- [ ] 大屏手机（6.5 寸+）
- [ ] 普通手机（5-6 寸）
- [ ] 小屏手机（<5 寸）
- [ ] 平板（横屏/竖屏）

## 🎯 功能测试场景

### 场景 1: 单标签筛选

1. 选择一个标签（如 "动作"）
2. 验证显示的都是包含该标签的媒体
3. 取消选择，验证显示所有媒体

### 场景 2: AND 逻辑测试（核心功能）

1. 选择标签 A（如 "动作"）
2. 观察结果数量（假设有 50 个）
3. 再选择标签 B（如 "科幻"）
4. 验证结果数量减少（如减少到 10 个）
5. 验证显示的媒体**同时包含** A 和 B 标签
6. 继续添加标签 C，验证结果进一步缩小

### 场景 3: 标签搜索

1. 在标签区域有很多标签时
2. 在搜索框输入关键词
3. 验证标签列表被筛选
4. 清空搜索框，验证显示所有标签

### 场景 4: 视图切换

1. 在网格视图查看媒体海报
2. 切换到列表视图
3. 验证布局变化
4. 在手机端验证两种视图都适配良好

### 场景 5: 媒体跳转

1. 点击任意媒体项
2. 验证在新标签页打开 Jellyfin 播放页面
3. 验证可以正常播放

## 🔍 常见问题验证

### 问题 1: CORS 跨域问题

**测试：** 如果直接打开 HTML 文件（file:// 协议），可能出现跨域错误

**解决：** 
- 部署到 Jellyfin 服务器（推荐）
- 或使用本地 HTTP 服务器

**验证：**
```powershell
# 使用 Python 启动简单 HTTP 服务器
python -m http.server 8000
# 然后访问 http://localhost:8000/jellyfin_tag_filter.html
```

### 问题 2: API 密钥权限

**测试：** 使用错误或无效的 API 密钥

**预期结果：** 显示错误提示 "HTTP 401" 或 "HTTP 403"

**解决：** 重新生成 API 密钥

### 问题 3: 手机端无法访问

**检查清单：**
- [ ] 手机和电脑在同一网络
- [ ] 使用正确的 IP 地址（不是 localhost）
- [ ] Jellyfin 服务器正在运行
- [ ] 防火墙未阻止 8096 端口

**验证防火墙：**
```powershell
# Windows 防火墙添加规则（以管理员运行）
New-NetFirewallRule -DisplayName "Jellyfin Server" -Direction Inbound -LocalPort 8096 -Protocol TCP -Action Allow
```

## 🧪 浏览器兼容性测试

### 桌面端

- [ ] Chrome / Edge (Chromium)
- [ ] Firefox
- [ ] Safari (macOS)

### 移动端

- [ ] Safari (iOS)
- [ ] Chrome (Android)
- [ ] 微信内置浏览器
- [ ] QQ 内置浏览器

## 📊 性能测试

### 大数据量测试

测试不同媒体库规模的性能：

- [ ] < 100 个媒体：应秒开
- [ ] 100-1000 个媒体：2-3 秒加载
- [ ] 1000-5000 个媒体：5-10 秒加载
- [ ] > 5000 个媒体：可能需要优化（分页或虚拟滚动）

### 标签数量测试

- [ ] < 50 个标签：流畅
- [ ] 50-200 个标签：良好
- [ ] > 200 个标签：使用搜索功能

## 🛠️ 调试技巧

### 开启浏览器控制台

**电脑端：**
- Windows/Linux: `F12` 或 `Ctrl + Shift + I`
- macOS: `Cmd + Option + I`

**手机端（以 Safari 为例）：**
1. 电脑上打开 Safari → 偏好设置 → 高级 → 勾选"在菜单栏显示开发菜单"
2. 手机 Safari 访问筛选器页面
3. 电脑 Safari → 开发 → 选择手机设备 → 选择页面

### 查看 API 请求

在控制台 Network 标签查看：
- 请求 URL 是否正确
- 返回状态码（200 = 成功）
- 返回数据格式

### 查看 JavaScript 错误

在控制台 Console 标签查看错误信息

## 📝 测试报告模板

```
测试时间: _______________
测试设备: _______________
浏览器: _______________

【基础功能】
□ 加载媒体库
□ 标签显示
□ AND 筛选逻辑
□ 标签搜索
□ 视图切换

【手机端适配】
□ 页面布局正常
□ 触摸操作流畅
□ 字体大小合适
□ 图片加载正常

【性能】
媒体数量: ____
标签数量: ____
加载时间: ____秒
筛选响应: ____

【问题记录】
1. _______________
2. _______________

【总体评价】
□ 优秀  □ 良好  □ 一般  □ 需改进
```

## 🎓 高级测试

### 测试不同媒体类型

- [ ] 电影
- [ ] 电视剧
- [ ] 音乐视频
- [ ] 其他视频类型

### 测试不同 NFO 格式

- [ ] Jellyfin 生成的 NFO
- [ ] 手动编辑的 NFO
- [ ] 从其他工具导入的 NFO

### 测试边界情况

- [ ] 没有标签的媒体
- [ ] 只有一个标签的媒体
- [ ] 有大量标签的媒体（10+ 个）
- [ ] 媒体库为空
- [ ] 全部媒体都被筛选掉（没有结果）

## 💡 优化建议

根据测试结果，可能的优化方向：

1. **性能优化**
   - 媒体数量 > 5000 时，实现虚拟滚动
   - 标签数量 > 200 时，实现分组或分类

2. **功能增强**
   - 添加标签排除功能（NOT 逻辑）
   - 添加收藏筛选组合
   - 添加历史记录

3. **用户体验**
   - 添加加载进度条
   - 优化移动端触摸区域
   - 添加快捷键支持

## ✅ 验收标准

满足以下条件即可正式使用：

- [x] 电脑端浏览器正常访问
- [x] 手机端浏览器正常访问
- [x] AND 逻辑筛选正确
- [x] 点击媒体可跳转到 Jellyfin
- [x] 响应式设计适配多种屏幕
- [x] 无明显性能问题

---

**预期测试时间：** 15-30 分钟

**推荐测试流程：** 电脑端基础测试 → 手机端基础测试 → 功能场景测试 → 边界测试

